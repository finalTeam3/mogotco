<!DOCTYPE html>
<html lang="en">
<head>
<link th:href="@{/plugins/colorbox/colorbox.css}" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" th:href="@{/styles/course.css}">
<link rel="stylesheet" type="text/css" th:href="@{/styles/course_responsive.css}">
<script th:src="@{/plugins/colorbox/jquery.colorbox-min.js}"></script>
<script th:src="@{/js/course.js}"></script>
<script>
// 시간선택 버튼 클릭시 value 값 input에 받아오기
function timeChange(statusTime) { // 버튼 클릭시 함수 시작
	var selectTime = $(statusTime).text(); // 버튼의 value값 받아오기
	$('#time').val(selectTime); // 버튼의 value값 input에 받아오기
};
</script>

</head>

	
	<!-- Home -->

	<div class="home">
		<div class="breadcrumbs_container">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="breadcrumbs">
							<ul>
								<li><a th:href="@{/}">Home</a></li>
								<li><a th:href="@{/courses}">Mentoring</a></li>
								<li>Mentoring Detail</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>			
	</div>

	<!-- Course -->

	<div th:each="mto:${mto} "class="course">
		<div class="container">
			<div class="row">

				<!-- Course -->
				<div class="col-lg-8">
					
					<div class="course_container">
						<div class="course_title" id="mtitle" th:text="${mto.mtitle}">Software Training</div>
						<div class="course_info d-flex flex-lg-row flex-column align-items-lg-center align-items-start justify-content-start">

							<!-- Course Info Item -->
							<div class="course_info_item">
								<div class="course_info_title">모집정원</div>
								<div class="course_info_text" th:text="${mto.mmemberidcnt}"><a href="#">Jacke Masito</a></div>
							</div>

							<!-- Course Info Item -->
							<div class="course_info_item">
								<div class="course_info_title">멘토링 진행 날짜</div>
								<div class="rating_r rating_r_4" id="mentoringdate" th:text="${#dates.format(mto.mentoringdate,'yyyy-MM-dd')}"></div>
							</div>

							<!-- Course Info Item -->
							<div class="course_info_item">
								<div class="course_info_title">카테고리</div>
								<div class="course_info_text" th:text="${mto.mcate_mname}"><a href="#">Languages</a></div>
							</div>

						</div>

						<!-- Course Image -->
						<div class="course_image"><img th:src="@{/images/}+${mto.mentoringimg}" alt=""></div>

						<!-- Course Tabs -->
						<div class="course_tabs_container">
							<div class="tabs d-flex flex-row align-items-center justify-content-start">
								<div class="tab active">mentoring info</div>
								<div class="tab">meeting place</div>
								<div class="tab">reviews</div>
							</div>
							<div class="tab_panels">

								<!-- Description -->
								<div class="tab_panel active">
									<p class="tab_panel_content" th:text="${mto.mcontents}" style="font-weight:bold; font-size:18px;"></p>
								</div>

								<!-- Curriculum -->
								<div class="tab_panel tab_panel_2">
									<div class="tab_panel_content">
									<div id="map" style="width:100%;height:350px;"></div>
									</div>
								</div>

								<!-- Reviews -->
								<div class="tab_panel tab_panel_3">
									<div class="tab_panel_title">Course Review</div>

									<!-- Rating -->
									<div class="review_rating_container">
										<div class="review_rating">
											<div class="review_rating_num">4.5</div>
											<div class="review_rating_stars">
												<div class="rating_r rating_r_4"><i></i><i></i><i></i><i></i><i></i></div>
											</div>
											<div class="review_rating_text">(28 Ratings)</div>
										</div>
										<div class="review_rating_bars">
											<ul>
												<li><span>5 Star</span><div class="review_rating_bar"><div style="width:90%;"></div></div></li>
												<li><span>4 Star</span><div class="review_rating_bar"><div style="width:75%;"></div></div></li>
												<li><span>3 Star</span><div class="review_rating_bar"><div style="width:32%;"></div></div></li>
												<li><span>2 Star</span><div class="review_rating_bar"><div style="width:10%;"></div></div></li>
												<li><span>1 Star</span><div class="review_rating_bar"><div style="width:3%;"></div></div></li>
											</ul>
										</div>
									</div>
									
									<!-- Comments -->
									<div class="comments_container">
										<ul class="comments_list">
											<li>
												<div class="comment_item d-flex flex-row align-items-start jutify-content-start">
													<div class="comment_image"><div><img th:src="@{/images/comment_1.jpg}" alt=""></div></div>
													<div class="comment_content">
														<div class="comment_title_container d-flex flex-row align-items-center justify-content-start">
															<div class="comment_author"><a href="#">Milley Cyrus</a></div>
															<div class="comment_rating"><div class="rating_r rating_r_4"><i></i><i></i><i></i><i></i><i></i></div></div>
															<div class="comment_time ml-auto">1 day ago</div>
														</div>
														<div class="comment_text">
															<p>There are many variations of passages of Lorem Ipsum available, but the majority have alteration in some form, by injected humour.</p>
														</div>
														<div class="comment_extras d-flex flex-row align-items-center justify-content-start">
															<div class="comment_extra comment_likes"><a href="#"><i class="fa fa-heart" aria-hidden="true"></i><span>15</span></a></div>
															<div class="comment_extra comment_reply"><a href="#"><i class="fa fa-reply" aria-hidden="true"></i><span>Reply</span></a></div>
														</div>
													</div>
												</div>
												<ul>
													<li>
														<div class="comment_item d-flex flex-row align-items-start jutify-content-start">
															<div class="comment_image"><div><img th:src="@{/images/comment_2.jpg}" alt=""></div></div>
															<div class="comment_content">
																<div class="comment_title_container d-flex flex-row align-items-center justify-content-start">
																	<div class="comment_author"><a href="#">John Tyler</a></div>
																	<div class="comment_rating"><div class="rating_r rating_r_4"><i></i><i></i><i></i><i></i><i></i></div></div>
																	<div class="comment_time ml-auto">1 day ago</div>
																</div>
																<div class="comment_text">
																	<p>There are many variations of passages of Lorem Ipsum available, but the majority have alteration in some form, by injected humour.</p>
																</div>
																<div class="comment_extras d-flex flex-row align-items-center justify-content-start">
																	<div class="comment_extra comment_likes"><a href="#"><i class="fa fa-heart" aria-hidden="true"></i><span>15</span></a></div>
																	<div class="comment_extra comment_reply"><a href="#"><i class="fa fa-reply" aria-hidden="true"></i><span>Reply</span></a></div>
																</div>
															</div>
														</div>
													</li>
												</ul>
											</li>
											<li>
												<div class="comment_item d-flex flex-row align-items-start jutify-content-start">
													<div class="comment_image"><div><img th:src="@{/images/comment_3.jpg}" alt=""></div></div>
													<div class="comment_content">
														<div class="comment_title_container d-flex flex-row align-items-center justify-content-start">
															<div class="comment_author"><a href="#">Milley Cyrus</a></div>
															<div class="comment_rating"><div class="rating_r rating_r_4"><i></i><i></i><i></i><i></i><i></i></div></div>
															<div class="comment_time ml-auto">1 day ago</div>
														</div>
														<div class="comment_text">
															<p>There are many variations of passages of Lorem Ipsum available, but the majority have alteration in some form, by injected humour.</p>
														</div>
														<div class="comment_extras d-flex flex-row align-items-center justify-content-start">
															<div class="comment_extra comment_likes"><a href="#"><i class="fa fa-heart" aria-hidden="true"></i><span>15</span></a></div>
															<div class="comment_extra comment_reply"><a href="#"><i class="fa fa-reply" aria-hidden="true"></i><span>Reply</span></a></div>
														</div>
													</div>
												</div>
											</li>
										</ul>
										<div class="add_comment_container">
											<div class="add_comment_title">Add a review</div>
											<div class="add_comment_text">You must be <a href="#">logged</a> in to post a comment.</div>
										</div>
									</div>
								</div>

							</div>
						</div>
					</div>
				</div>

				<!-- Course Sidebar -->
				<div class="col-lg-4">
					<div class="sidebar">

						<!-- Feature_course -->
						<div class="sidebar_section">
							<div class="sidebar_section_title">Mentoring Price</div>
							<div class="sidebar_feature">
								<span style = " font-size:1.5em;"><strong>가격 : </strong></span>
								<div style="display:inline-block;" id="mentoring_price" class="course_price" th:text="${mto.mentoringprice}"></div>
								<br>
								<br>

								<!-- Features -->
								<div class="feature_list">
								<div class="sidebar_section_title" style="margin-bottom:18px; margin-top:40px;">Time & Purchase</div>

									<!-- Feature -->
								<div class="feature_course d-flex flex-row align-items-center justify-content-start">
									<div th:each="mttime:${mttime}">
										&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
										<button id="time_btn" th:onclick="timeChange(this)" th:text="${mttime.mentoringtime}" type="submit" class="home_search_button" style="margin-right:3px;"></button>
									</div>
								</div>
									<div class="feature_course_title"><i class="fa fa-clock-o" aria-hidden="true"></i>
										<input id="time" class="form-control border-0" type="text" placeholder="Mentoring Time" style="width:170px; outline:3px solid #14bdee; margin-top:10px; background-color:white; color:black;" readonly>
									</div>
									<div>
										&nbsp&nbsp
										<button type="submit" class="home_search_button" th:onclick="purchase()" style="margin-top:70px; width:200px">구매하기</button>
									</div>
								
							</div>
						</div>
						

						<!-- Feature -->
						<br>
						<br>
						<br>
						<br>
						<div class="sidebar_section">
							<div class="sidebar_section_title">Mentor</div>
							<div class="sidebar_teacher">
								<div class="teacher_title_container d-flex flex-row align-items-center justify-content-start">
									<div class="teacher_image"><a th:href="@{/mentor/mentordetail(mentorid=${mtg.mentorid})}"><img th:src="@{/images/}+${mto.mentor_mentorimg}" alt=""></a></div>
									<div class="teacher_title">
										<div style="display:inline; color:#808080;"><span>Mentor ID :</span></div>
										<div style="display:inline; color:#808080;" class="teacher_name" th:text="${mto.user_userid}" th:href="@{/mentor/mentordetail}"><a href="#"></a></div>
										<br>
										<div style="display:inline; color:#808080;"><span>현직 회사 :</span></div>
										<div style="display:inline; color:#808080;" class="teacher_name" th:text="${mto.mentor_mentorcom}"><a href="#"></a></div>
									</div>		
								</div>
								&nbsp
								&nbsp
								<div class="teacher_meta_container">
									<!-- Teacher Rating -->
									<div class="teacher_meta d-flex flex-row align-items-center justify-content-start">
										<!-- 대면 -->
										<div class="teacher_meta_title">MentoringService:</div>
										<div class="teacher_meta_text ml-auto"><span th:text="${mto.mentorurl}">4.7</span></div>
									</div>
									<!-- Teacher Review -->
									<div class="teacher_meta d-flex flex-row align-items-center justify-content-start">
										<!-- 비대면 -->
										<div class="teacher_meta_title">MentoringPlace:</div>
										<div class="teacher_meta_text ml-auto">
											<span th:text="${mto.mplace}">12k</span></div>
									</div>
									<!-- Teacher Quizzes -->
									<div class="teacher_meta d-flex flex-row align-items-center justify-content-start">
										<div class="teacher_meta_title">CaringService:</div>
										<div class="teacher_meta_text ml-auto" th:if="${mto.mcaring == 1}"><span>있음</span></div>
										<div class="teacher_meta_text ml-auto" th:if="${mto.mcaring == 0}"><span>없음</span></div>
									</div>
								</div>
							</div>
						</div>

						<!-- Latest Course -->
						<div class="sidebar_section">


						</div>

					</div>
				</div>
			</div>
		</div>
	</div>
	
	
<script>
//구매하기(choyunyoung add)
//mentorname,mentoringoptionid
function purchase() {
	var mentoringid ='[[${mto.mentoringid}]]';//mentoringid
	var mtitle = '[[${mto.mtitle}]]';	//mtitle
		//mentorname
	var mentoringdate =$('#mentoringdate').text(); //mentoringdate
	var mentoring_mentoringdate = new Date('[[${mto.mentoringdate}]]');
	var mentoringtime =$('#time').val();	//mentoringtime
	var mplace = '[[${mto.mplace}]]';	//mplace
	var mentoringprice='[[${mto.mentoringprice}]]';//mentoringprice
	//mentoringoptionid(controller에서 만들어줌)
	
	location.href = '[[@{/purchase?mentoring_mentoringid=}]]'
		+ mentoringid + '&[[@{mentoring_mtitle=}]]' + mtitle + '&[[@{mentoring_mentoringdate=}]]' + mentoringdate + '&[[@{mentoringoption_mentoringtime=}]]' + mentoringtime + '&[[@{mentoring_mplace=}]]'
		+ mplace + '&[[@{mentoring_mentoringprice=}]]' + mentoringprice;
}

</script>
<!-- kakao map -->
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=aa0b8f301544c68fe928d59bb6b4f627&libraries=services"></script>
<!-- kakao map -->
 <script>
 var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
 mapOption = {
     center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
     level: 3 // 지도의 확대 레벨
 };  

//지도를 생성합니다    
var map = new kakao.maps.Map(mapContainer, mapOption); 

//주소-좌표 변환 객체를 생성합니다
var geocoder = new kakao.maps.services.Geocoder();

//주소로 좌표를 검색합니다
geocoder.addressSearch('[[${mto.mplace}]]', function(result, status) { 

 // 정상적으로 검색이 완료됐으면 
  if (status === kakao.maps.services.Status.OK) {

     var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

     // 결과값으로 받은 위치를 마커로 표시합니다
     var marker = new kakao.maps.Marker({
         map: map,
         position: coords
     });

     // 인포윈도우로 장소에 대한 설명을 표시합니다
     var infowindow = new kakao.maps.InfoWindow({
         content: '<div style="width:150px;text-align:center;padding:6px 0; color:black;">대면 멘토링 장소</div>'
     });
     infowindow.open(map, marker);

     // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
     map.setCenter(coords);
 } 
});
</script>