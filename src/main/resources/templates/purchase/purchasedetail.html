<!DOCTYPE html>
<html lang="utf-8">
<head>
<meta charset="utf-8">
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
<!-- Customized Bootstrap Stylesheet -->
<link rel="stylesheet" type="text/css" th:href="@{/styles/contact.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/styles/contact_responsive.css}">
<style type="text/css">
.responsive-table {
	width: 100%;
	margin-bottom: 1.5em;
}

.responsive-table thead {
	position: absolute;
	clip: rect(1px, 1px, 1px, 1px);
	/* IE6, IE7 */
	clip: rect(1px, 1px, 1px, 1px);
	padding: 0;
	border: 0;
	height: 1px;
	width: 1px;
	overflow: hidden;
}

.responsive-table thead th {
	background-color: #005b00;
	border: 1px solid #005b00;
	font-weight: normal;
	text-align: center;
	color: white;
}

.responsive-table thead th:first-of-type {
	text-align: left;
}

.responsive-table tbody, .responsive-table tr, .responsive-table th,
	.responsive-table td {
	display: block;
	padding: 0;
	text-align: left;
	white-space: normal;
}

.responsive-table th, .responsive-table td {
	padding: .5em;
	vertical-align: middle;
}

.responsive-table caption {
	margin-bottom: 1em;
	font-size: 1em;
	font-weight: bold;
	text-align: center;
}

.responsive-table tfoot {
	font-size: .8em;
	font-style: italic;
}

.responsive-table tbody tr {
	margin-bottom: 1em;
	border: 2px solid #005b00;
}

.responsive-table tbody tr:last-of-type {
	margin-bottom: 0;
}

.responsive-table tbody th[scope="row"] {
	background-color: #005b00;
	color: white;
}

.responsive-table tbody td[data-type=currency] {
	text-align: right;
}

.responsive-table tbody td[data-title]:before {
	content: attr(data-title);
	float: left;
	font-size: .8em;
	color: rgb(0, 0, 0);
}

.responsive-table tbody td {
	text-align: right;
	border-bottom: 1px solid #005b00;
}

@media ( min-width : 200em) {
	.responsive-table {
		font-size: .9em;
	}
	.responsive-table thead {
		position: relative;
		clip: auto;
		height: auto;
		width: auto;
		overflow: auto;
	}
	.responsive-table tr {
		display: table-row;
	}
	.responsive-table th, .responsive-table td {
		display: table-cell;
		padding: .5em;
	}
	.responsive-table caption {
		font-size: 1.5em;
	}
	.responsive-table tbody {
		display: table-row-group;
	}
	.responsive-table tbody tr {
		display: table-row;
		border-width: 1px;
	}
	.responsive-table tbody tr:nth-of-type(even) {
		background-color: rgba(94, 93, 82, 0.1);
	}
	.responsive-table tbody th[scope="row"] {
		background-color: transparent;
		color: rgb(0, 0, 0);
		text-align: left;
	}
	.responsive-table tbody td {
		text-align: center;
	}
	.responsive-table tbody td[data-title]:before {
		content: none;
		color: rgb(0, 0, 0);
	}
}

@media ( min-width : 62em) {
	.responsive-table {
		font-size: 1em;
	}
	.responsive-table th, .responsive-table td {
		padding: .75em .5em;
	}
	.responsive-table tfoot {
		font-size: .9em;
	}
}

@media ( min-width : 75em) {
	.responsive-table th, .responsive-table td {
		padding: .75em;
	}
}
/* button */
.comment_button1 {
	width: 70px;
	height: 46px;
	background: #005b00;
	text-transform: uppercase;
	font-size: 14px;
	font-weight: 500;
	color: #FFFFFF;
	cursor: pointer;
	border: none;
	outline: none;
	border-radius: 3px;
	margin-top: 15px;
}

.comment_button1:hover {
	box-shadow: 0px 5px 40px rgba(0, 0, 0, 0.25);
}
.modal-title
{
	font-family: 'FontAwesome';
}
</style>
<style>
     #ul {
          list-style-type: none;
          background-color: #D9D9D9;
          width: 50%;
          padding: 0;
          margin: 0;
          border-radius: 2%;
     }

     #li a {
          text-decoration: none;
          display: block;
          color: #000;
          padding: 5% 12% 5% 12%;
          font-weight: bold;
          border-bottom: 1px solid #fff;
          cursor:pointer;
     }

     #li a:hover {
          background-color: #005B00;
          color: #fff;
          border-radius: 2%;
          
     }
     
     @media (max-width: 768px) {
    /* 모바일에 최적화된 예외 CSS 코드*/
         #ul {
          list-style-type: none;
          background-color: #ccc;
          width: 100%;
          padding: 0;
          margin: 0;
          border-radius: 2%;
     }

     #li a {
          text-decoration: none;
          display: block;
          color: #000;
          padding: 2% 8% 2% 8%;
          font-weight: bold;
          border-bottom: 1px solid #fff;
          cursor:pointer;
     }

     #li a:hover {
          background-color: #005B00;
          color: #fff;
          border-radius: 2%;
          
     }
}
     #ul li a.on {
          background-color: #005B00;
          color: #fff;
          border-radius: 2%;
          
     }
</style>
<script type="text/javascript">
$(function(){
	// #ul의 자식 엘리먼트(li)가 몇번째인지 확인한 후 a요소를 찾은 후 on이라는 클래스 추가
    $('#ul').children().eq(3).find('a').addClass('on');

});
</script>
<script
	src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
<!-- jQuery -->
<script type="text/javascript"
	src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script th:src="@{/plugins/colorbox/jquery.colorbox-min.js}"></script>
<script>
	function review(purchaseid, mentor_userid) {
		var c = confirm('리뷰를 작성하시겠습니까?');
		if (c == true) {
			location.href = '[[@{/review/review?id=}]]' + purchaseid
					+ '[[@{mentor_userid=}]]' + mentor_userid;
		}
	};

	$(document)
			.ready(
					function() {
						$('#reviewregi_btn')
								.click(
										function(mentorid) {
											var mentorid = $('#mentorid').val();
											var mentoringid = $('#mentoringid')
													.val();
											var userid = '[[${session.loginuser.userid}]]';
											var starrating = $(
													"input[name='rating']:checked")
													.val();
											var reviewcon = $('#reviewcon')
													.val();
											$
													.ajax({
														url : '[[@{/addreview}]]',
														data : {
															'mentoringid' : mentoringid,
															'userid' : userid,
															'starrating' : starrating,
															'reviewcon' : reviewcon
														},
														success : location.href = '[[@{/mentor/mentordetail?mentorid=}]]'
																+ mentorid
													});
										});
					});
</script>
</head>


<body>
	<!-- Home -->

	<div class="home">
		<div class="breadcrumbs_container">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="breadcrumbs">
							<ul>
								<li><a th:href="@{/}">홈</a></li>
								<li><a th:href="@{/user/mypage(userid=${userid})}">마이페이지</a></li>
								<li>구매 이력</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Checkout Start -->
	<div class="contact">
		<div class="contact_info_container">
			<div class="container">
				<div class="row">
				
			<div class="col-lg-4">
				<div class="sidebar">
				<a th:href="@{/user/mypage(userid = ${session.loginuser.userid})}"><div class="contact_info_title"><!-- 마이페이지 --></div></a>
					<!-- Latest Course -->
<!-- 					<div class="sidebar_section">
						<div style="margin-top: 50px;" th:if="${ms != null}"
							class="sidebar_section_title">Mentoring Register</div>
						<div class="sidebar_latest">
							Latest Course
							<div
								class="latest d-flex flex-row align-items-start justify-content-start">
							</div>
						</div>
					</div> -->
					<div>&nbsp</div>
					<div>&nbsp</div>
						<div class="sidebar_section">
							<div class="sidebar_section_title"></div>
							<div class="sidebar_categories">
								<ul id="ul" style="text-align: center">
									<li id="li">
										<a th:if="${ms == null}" th:onclick="|location.href='@{/mentor/mentorregister(id=${us.userid})}'|">멘토 등록</a>
									</li>
									<li id="li">
										<a th:if="${ms != null}" th:onclick="|location.href='@{/mentor/idcheck(mentorid=${ms.mentorid})}'|">멘토 정보</a>
									</li> 
									<li id="li">
										<a th:if="${ms != null}" th:onclick="|location.href='@{/mentor/mentormodify(id=${us.userid},mentorid=${ms.mentorid})}'|">멘토 정보 수정</a>
									</li>
									<li id="li">
										<a th:onclick="|location.href='@{/purchase/purchasedetail(id=${us.userid})}'|">구매 이력</a>
									</li>
									<li id="li">
										<a th:onclick="|location.href='@{/mentoring/mymentoringdetail(id=${us.userid})}'|">멘토링 이력</a>
									</li>
									<li id="li">
										<a th:if="${ms != null and ms.mentorok == 1}" th:onclick="|location.href='@{/mentor/mentoringadmin(id=${us.userid},mentorid=${ms.mentorid})}'|">멘토링 관리</a>
									</li>
									<li id="li">
										<a th:onclick="|location.href='@{/coupon/mycoupon(id=${us.userid})}'|">내 쿠폰함</a>
									</li>
								</ul>
							</div>
						</div>
				</div>
			</div>
				
					<div class="col-lg-8">
					<div class="contact_info_title"><!-- PurchaseDetail --></div>
						<div class="contact_form" th:each="c:${list}">
							<table class="responsive-table">
								<thead>
									<tr>
										<th scope="col">멘토링 이름</th>
										<th scope="col">구매 번호</th>
										<th scope="col">구매 날짜</th>
										<th scope="col">구매 가격</th>
										<th scope="col">구매 방법</th>
										<th scope="col">구매 카드</th>
										<th scope="col">멘토링 날짜</th>
										<th scope="col">멘토링 멤버수</th>
										<th scope="col">멘토링 방식</th>
										<th scope="col">멘토링 장소</th>
										<th scope="col">진행 상황</th>
										<th scope="col"></th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<th scope="row" th:text="${c.mentoring_mtitle}"></th>
										<td data-title="구매 번호" th:text="${c.purchaseid}"></td>
										<td data-title="구매 날짜"
											th:text="${#dates.format(c.purchase_purdate, 'yyyy-MM-dd')}"></td>
										<td data-title="구매 가격" th:text="${c.purchase_purprice}"></td>
										<td data-title="구매 방법" th:text="${c.purchase_purpay}"></td>
										<td data-title="구매 카드" th:text="${c.purchase_purcard}"></td>
										<td data-title="멘토링 날짜"
											th:text="${#dates.format(c.mentoring_mentoringdate, 'yyyy-MM-dd')}"></td>
										<td data-title="멘토링 멤버수" th:text="${c.mentoringmembercnt}"></td>
										<td data-title="멘토링 방식"
											th:text="${c.mentoring_mentorurl}"></td>
										<td data-title="멘토링 장소"
											th:text="${c.mentoring_mplace}"></td>
										<td data-title="진행 상황" th:text="${c.progresspur}"
											id="progresspuresult"></td>
										<td>
											<button type="button" id="review_btn" data-toggle="modal"
												data-target="#reviewmodal" class="comment_button1">Review
											</button>
										</td>


									</tr>
								</tbody>
							</table>
							<!-- Review Modal -->
							<div class="modal fade" id="reviewmodal" tabindex="-1"
								role="dialog" aria-labelledby="exampleModalCenterTitle"
								aria-hidden="true">
								<div class="modal-dialog modal-dialog-centered" role="document">
									<div class="modal-content">

								 		<div class="modal-header">
											<h6 class="modal-title" id="exampleModalLabel" >멘토에게
												리뷰남기기</h6>
										</div>

										<div class="modal-body">
											<div class="add_comment_container">

												<div class="add_comment_title" style="font-family: 'fontawesome';">
													좋은 수강평을 남겨주시면 MOGOTCO와 멘토님께 큰 힘이 됩니다!
													<div class="teacher_image review_mentoring_title">
														<img th:src="@{/img/}+${c.mentor_mentorimg}"
															style="width: 100px; height: 100px;" alt="">
													</div>
													<div class="review_mentoring_title"
														th:text="${c.mentoring_mtitle}">멘토링 제목</div>
												</div>

												<form name="review_form" id="review_form"
													class="review_form">
													<!-- rating -->
													<fieldset>
														<!-- secret -->
														<input type="hidden" class="mentoringid" id="mentoringid"
															name="mentoringid" th:value="${c.mentoring_mentoringid}">
														<input type="hidden" class="mentorid" id="mentorid"
															name="mentorid" th:value="${c.mentor_mentorid}">

														<!-- rating -->
														<span class="text-bold">별점을 선택해주세요</span> <input
															type="radio" class="rating" name="rating" value="5"
															id="rate1"> <label for="rate1"
															class="fa-solid fa-star fa-xl"></label> <input
															type="radio" class="rating" name="rating" value="4"
															id="rate2"> <label for="rate2"
															class="fa-solid fa-star fa-xl"></label> <input
															type="radio" class="rating" name="rating" value="3"
															id="rate3"> <label for="rate3"
															class="fa-solid fa-star fa-xl"></label> <input
															type="radio" class="rating" name="rating" value="2"
															id="rate4"> <label for="rate4"
															class="fa-solid fa-star fa-xl"></label> <input
															type="radio" class="rating" name="rating" value="1"
															id="rate5"> <label for="rate5"
															class="fa-solid fa-star fa-xl"></label>

													</fieldset>

													<textarea type="text" class="comment_input_review" name="reviewcon" id="reviewcon" placeholder = "후기를 남겨주시면 50포인트를 드립니다!"></textarea>

												</form>
											</div>
										</div>

										<div class="modal-body-btn">
											<button type="button" class="btn btn-secondary"
												data-dismiss="modal">Close</button>
											<button type="button" id="reviewregi_btn"
												class="btn btn-secondary"
												style="background-color: #005b00; border-color: #005b00"
												data-dismiss="modal">등록하기</button>
										</div>
									</div>
								</div>
							</div>
						</div>

					</div>
					<!-- Contact Info -->
					
				</div>



			</div>
		</div>
	</div>



</body>
</html>