<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<link rel="stylesheet" type="text/css" th:href="@{/styles/contact.css}">
<link rel="stylesheet" type="text/css" th:href="@{/styles/contact_responsive.css}">
<script th:src="@{/plugins/marker_with_label/marker_with_label.js}"></script>
<script th:src="@{/js/contact.js}"></script>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<style>
#pubutton{
margin-left: 22%;
}

#mcbutton{
margin-left: 1%;
}
</style>
<script>
$(document).ready(function(){
	$('#update_btn').click(function(){
		$('#modify_form').attr({
			'enctpe':'multipart/form-data',
			'method':'post',
			'action':'[[@{/mentor/modifyimpl}]]'
		});
		$('#modify_form').submit();
	});
});

function display(data) {
	var name = data.images[0].fields[0].inferText
	var position = data.images[0].fields[1].inferText
	var company = data.images[0].fields[2].inferText


	alert(name);
	alert(position);
	alert(company);

}

function previewprofile(event) {// 프로필 이미지 미리 보여주기
	    var reader = new FileReader();

	    reader.onload = function(event) {
	    	$('#uploadprofile').attr('src',event.target.result);
	    	$('#uploadprofile').attr('style','width:300px; hight:300px;');
	    };
	    reader.readAsDataURL(event.target.files[0]);
	  }

function previewimg(event) {// 명함 이미지 미리 보여주기
/* 	$('#msgText').hide();// 영수증 업로드 시 msg 내용 지우기 
	
	$('#context').hide(); */
    var reader = new FileReader();

    reader.onload = function(event) {
    	$('#uploadimg').attr('src',event.target.result);
    	$('#uploadimg').attr('style','width:300px; hight:300px;');
    	
    };
    reader.readAsDataURL(event.target.files[0]);
    //alert('reader.readAsDataURL : ' + event.target.files[0]);
  }

function upload() {
	const imageInput = $("#mcf")[0];
	console.log("mcf: ", imageInput.files)

	if (imageInput.files.length === 0) {
		alert("파일을 선택해주세요");
		return;
	}

	const formData = new FormData();
	formData.append("image", imageInput.files[0]);

	
/* 		for (var value of formData.values()) {
	   console.log(value);
	} */

	$.ajax({
		type : "POST",
		url : '/ocrresult',
		processData : false,
		contentType : false,
	 	data: formData,
		success : function(data) {
			//alert(data);
			alert(data.images[0].fields[0].inferText);
			display(data);
		}
	});
}

</script>
</head>

	<!-- Home -->
 
	<div class="home">
		<div class="breadcrumbs_container">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="breadcrumbs">
							<ul>
								<li><a th:href="@{/}">Home</a></li>
								<li>MODIFY</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>			
	</div>


	<div class="contact">


		<div class="contact_info_container">
			<div class="container">
				<div class="row">
					<!-- 멘토 프로필 이미지, 명함 이미지 화면에 나오기 위해 시간이 걸림 -->
					<div class="col-lg-8">
						<div class="contact_form">
							<div class="contact_info_title">Mentor Modify</div>
							<form class="register_form" id = "modify_form" enctype="multipart/form-data">
								
								<div>
									<label class="form_title"> 
										<div>
											<img id="uploadprofile" th:src="@{/img/}+${m.mentorimg}" style="width:200px"/>
										</div>
									<label id="pubutton" class="btn btn-dark" for="mpimg" style="width:110px;height:35px;font-size:15px">프로필 수정</label>
									</label>
									<input type="file" style="display:none" name="mpimg" id="mpimg" onchange="previewprofile(event);">
								</div>

								<div>
									<label for = "mentorid" class="form_title">Mentorid</label>
									<input type="text" class="userid comment_input" th:value="${m.mentorid}" name="mentorid" id="mentorid" readonly="readonly">
								</div>

								<div>
									<label for = "userid" class="form_title">Userid</label>
									<input type="text" class="userid comment_input" th:value="${m.userid}" name="userid" id="userid" readonly="readonly">
								</div>

								<div style = "display:none">
									<label for = "adminid" class="form_title">Adminid</label>
									<input type="text" class="comment_input" th:value="${m.adminid}" name="adminid" id="adminid">
								</div>
				
			
													
								<div>
									<label class="form_title">Mentor Card
									<div>
										<img id="uploadimg" th:src="@{/img/}+${m.mcardimg}" style="width:120px" />&nbsp&nbsp&nbsp&nbsp
									<label class="btn btn-dark" for="mcimg" style="width:96px;height:31px;font-size:13px">명함 수정</label>
									</div>
									</label>
									<input type="file" class="comment_input" style="display:none" name="mcimg" id="mcimg"  onchange="previewimg(event);">
									<div>
									<button id="mcbutton" th:onclick="upload()" class="comment_button trans_200" style="width:50px;height:24px">등록</button>
									</div>
								</div>			
								
								<div>
									<label for = "mentorcom" class="form_title">Mentorcom<span style="color:red"> *</span></label>
									<input type="text" class="comment_input" th:value="${m.mentorcom}" id="mentorcom" name="mentorcom">
								</div>

								<div>
									<label for = "mcardposition" class="form_title">Mcardposition<span style="color:red"> *</span></label>
									<input type="text" class="comment_input" th:value="${m.mcardposition}" id="mcardposition" name="mcardposition">
								</div>

								<div>
									<label for = "mentorcon" class="form_title">Mentorcon<span style="color:red"> *</span></label>
									<textarea class="comment_input" th:text="${m.mentorcon}" name="mentorcon" id="mentorcon"></textarea>
								</div>

								<div>
									<label for = "mentorcareer" class="form_title">Mentorcareer<span style="color:red"> *</span></label>
									<textarea class="comment_input" th:text="${m.mentorcareer}" id="mentorcareer" name="mentorcareer"></textarea>
								</div>

								<div>
										<label for = "mwishcate" class="form_title">Category<span style="color:red"> *</span></label><br>
										<div class="form-check-inline">
									       	<label class="form-check-label" for="web">
									          <input type="checkbox" class="form-check-input" id="web" name="mcateid" value=10>
									          web
									        </label>
								        </div>
								        <div class="form-check-inline"> 
									        <label class="form-check-label" for="secure">
									          <input type="checkbox" class="form-check-input" id="secure" name="mcateid" value=20>
									          secure
									        </label>
								        </div>
									    <div class="form-check-inline">
									      <label class="form-check-label" for="network">
									        <input type="checkbox" class="form-check-input" id="network" name="mcateid" value=30>
									        network
									      </label>
									    </div>							        
									    <div class="form-check-inline">
									      <label class="form-check-label" for="ds">
									        <input type="checkbox" class="form-check-input" id="ds" name="mcateid" value=40>
									        Data Science
									      </label>
									    </div>
									    <div class="form-check-inline">
									      <label class="form-check-label" for="game">
									        <input type="checkbox" class="form-check-input" id="game" name="mcateid" value=50>
									        Game
									      </label>
									    </div>
									    <div class="form-check-inline">
									      <label class="form-check-label" for="ai">
									        <input type="checkbox" class="form-check-input" id="ai" name="mcateid" value=60>
									        AI
									      </label>
									    </div>
									    <div class="form-check-inline">
									      <label class="form-check-label" for="cloud">
									        <input type="checkbox" class="form-check-input" id="cloud" name="mcateid" value=70>
									       	Cloud
									      </label>
									    </div>
									    <div class="form-check-inline">
									      <label class="form-check-label" for="etc">
									        <input type="checkbox" class="form-check-input" id="etc" name="mcateid" value=80>
									        etc
									      </label>
								    </div>
								    
								    <div>&nbsp</div>
								    
								</div>

								<button id = "update_btn" class="comment_button trans_200">Modify</button>
								
							</form>
																					
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

 


	